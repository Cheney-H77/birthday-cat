<!doctype html>
<html lang="zh-CN">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>Happy 18 â€¢ å°çŒ«ç»™ä½ çš„ç”Ÿæ—¥ä¿¡</title>
<meta name="description" content="ç»™ä½ çš„18å²ï¼šå€’è®¡æ—¶ã€ä¼šåŠ¨çš„å°çŒ«ã€ç¿»å¡ç‰Œå’Œå½©è›‹ã€‚">
<style>
  /* ===== é¢œè‰²ä¸åŸºç¡€æ’ç‰ˆ ===== */
  :root{--pink:#ff4d6d;--bg1:#fff4f7;--bg2:#fff;--ink:#222;}
  *{box-sizing:border-box} html,body{margin:0}
  body{
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text",Segoe UI,Roboto,Helvetica,Arial;
    background:linear-gradient(180deg,var(--bg1),var(--bg2));
    color:var(--ink)
  }
  .wrap{max-width:860px;margin:0 auto;padding:22px}
  .card{background:#fff;border-radius:22px;box-shadow:0 10px 30px rgba(255,0,80,.08);padding:22px;margin-bottom:16px}
  h1{font-size:26px;margin:6px 0 10px}
  h2{font-size:20px;margin:0 0 10px}
  .sub{opacity:.85}.muted{opacity:.72;font-size:13px}.center{text-align:center}
  .btn{display:inline-block;padding:12px 16px;border-radius:999px;background:var(--pink);color:#fff;font-weight:600;border:none}
  .btn:active{transform:scale(.98)}
  .pill{display:inline-block;background:#ffe5eb;padding:8px 12px;border-radius:999px;margin:6px 8px 0 0;font-size:14px}

  /* ===== å€’è®¡æ—¶æ ·å¼ ===== */
  .count{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;margin:8px 0}
  .box{min-width:70px;padding:10px 12px;border-radius:12px;background:#fff5f7;border:1px solid #ffd5e0;text-align:center}
  .box b{font-size:20px;display:block}

  /* ===== ç…§ç‰‡å°çŒ«èˆå° ===== */
  .stage{height:260px;position:relative;overflow:hidden}
  .kitty-photo{
    position:absolute;left:50%;top:55%;transform:translate(-50%,-50%);
    width:min(65vw,320px);border-radius:20px;box-shadow:0 10px 20px rgba(0,0,0,.12)
  }
  .kitty-shadow{
    position:absolute;left:50%;top:78%;transform:translateX(-50%);
    width:52%;height:16px;background:radial-gradient(ellipse at center, rgba(0,0,0,.18), rgba(0,0,0,0) 60%);
    filter:blur(6px);opacity:.6
  }
  /* å°è¡¨æ¼”åŠ¨ä½œï¼šè½¬åœˆ/è·³/è·‘/æŠ–åŠ¨ï¼ˆé€šè¿‡åŠ ç±»åè§¦å‘ï¼‰ */
  .spin {animation:spin .9s ease-in-out}
  @keyframes spin {from{transform:translate(-50%,-50%) rotate(0)} to{transform:translate(-50%,-50%) rotate(360deg)}}
  .jump {animation:jump .7s ease-out}
  @keyframes jump {0%{transform:translate(-50%,-50%)}50%{transform:translate(-50%,-62%)}100%{transform:translate(-50%,-50%)}}
  .runL {animation:runL 1.1s ease-in-out}
  @keyframes runL {0%{left:70%}50%{left:30%}100%{left:50%}}
  .runR {animation:runR 1.1s ease-in-out}
  @keyframes runR {0%{left:30%}50%{left:70%}100%{left:50%}}
  .shake{animation:shake .45s ease-in-out}
  @keyframes shake{0%,100%{transform:translate(-50%,-50%)}25%{transform:translate(calc(-50% - 6px),-50%)}75%{transform:translate(calc(-50% + 6px),-50%)}}

  /* ===== ç¿»ç‰Œç½‘æ ¼ ===== */
  .grid18{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media(min-width:640px){.grid18{grid-template-columns:repeat(3,1fr)}}
  .flip{perspective:1000px}
  .card3d{
    position:relative;height:110px;border-radius:16px;transform-style:preserve-3d;transition:transform .6s;
    box-shadow:0 8px 18px rgba(0,0,0,.06);cursor:pointer;background:#fff
  }
  .card3d:hover{transform:translateY(-2px)}
  .face{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:10px;border-radius:16px;
        backface-visibility:hidden;font-size:16px}
  .front{background:#ffe8ef}
  .back{transform:rotateY(180deg);background:#fff}
  .flipped .card3d{transform:rotateY(180deg)}

  /* ===== hearts ===== */
  .hearts{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;overflow:hidden}
  .heart{position:absolute;font-size:22px;animation:rise 2.4s ease-out forwards}
  @keyframes rise{from{transform:translateY(0) scale(.6);opacity:1}to{transform:translateY(-120vh) scale(1.2);opacity:0}}
  .footer{margin:16px 0;text-align:center;opacity:.6}
</style>

<div class="wrap">
  <!-- é¡¶éƒ¨ç¥ç¦ + å€’è®¡æ—¶ -->
  <div class="card center">
    <div class="sub" id="hi">å°å¯çˆ±ï¼Œæˆ‘æ¥å•¦ï½</div>

    <!-- ç…§ç‰‡çŒ«èˆå° -->
    <div class="stage">
      <!-- ä½¿ç”¨ä½ çš„ç…§ç‰‡ã€‚è·¯å¾„ï¼šassets/cat.png -->
      <img class="kitty-photo" id="kittyPhoto" src="./assets/cat.png" alt="å¯çˆ±å°çŒ«">
      <div class="kitty-shadow"></div>
    </div>

    <h1 id="title">Happy 18th Birthday ğŸ‚</h1>
    <div class="type" id="type" style="min-height:2.2em;white-space:pre-wrap;font-size:18px;line-height:1.7"></div>

    <!-- å€’è®¡æ—¶å®¹å™¨ -->
    <div class="count" id="countdown" aria-live="polite" style="margin-top:10px"></div>

    <div style="margin-top:10px">
      <!-- å½©è›‹å…¥å£ï¼Œç¡®ä¿ä»“åº“æœ‰ /307/index.html -->
      <a class="pill" href="./307/" target="_self">ğŸ æ‰“å¼€å½©è›‹</a>
    </div>

    <div class="muted" id="sig" style="margin-top:8px">â€”â€” æ¥è‡ªä½ çš„æŸæŸ</div>
  </div>

  <!-- 18 å¼ ç¿»ç‰Œï¼ˆæœ€åä¸€å¼ å›ºå®šâ€œè·å¾—ä¸€åªå°çŒ«â€ï¼‰ -->
  <div class="card">
    <h2 class="center">18ä¸ªå°å¿ƒæ„¿ & å¤¸å¤¸å¡</h2>
    <div class="grid18" id="grid18"></div>
    <div class="muted center" style="margin-top:6px">ç‚¹ä»»æ„å¡ç‰‡å¯ç¿»é¢ï½</div>
  </div>

  <!-- ä¸€å°æ®µç”Ÿæ—¥è¯—ï¼ˆå¯æ”¹ï¼‰ -->
  <div class="card">
    <h2>ç»™ä½ çš„åå…«å² Â· ä¸€å°æ®µè¯—</h2>
    <div style="line-height:1.9;font-size:17px">
      å¤œè‰²æŠŠæ ¡é“æ“¦å¾—å¾ˆäº®ï¼Œé£ç»è¿‡ä½ å‘æ¢¢ï¼›<br>
      æˆ‘æŠŠå–œæ¬¢è—åœ¨å£è¢‹é‡Œï¼Œè£…ä½œåªæ˜¯è·¯è¿‡ã€‚<br>
      è‹¥ä¸–ç•Œå¶å°”å¤ªåµï¼Œç»™ä½ ä¸€è§’å®‰é™â€”â€”<br>
      ç¯å½±é˜‘çŠå¤„ï¼Œæ˜¯ä½ æ­¥å±¥çš„å›å“ã€‚<br>
      ç¥ä½ åå…«å²ï¼Œä»åœ¨å‘å…‰ï¼Œä¹Ÿè¢«æ¸©æŸ”ç…§äº®ã€‚
    </div>
  </div>

  <div class="footer">Â© <span id="year"></span> For you.</div>
</div>

<!-- hearts å®¹å™¨ -->
<div class="hearts" id="hearts"></div>

<script>
  /* ===== 1) å¯é…ç½®é¡¹ï¼šæ—¶é—´ä¸ç§°å‘¼ ===== */
  const BIRTHDAY = "2025-12-13 00:00:00"; // æµè§ˆå™¨æœ¬åœ°æ—¶åŒºï¼›å¯æ”¹åˆ°æ—¶åˆ†ç§’
  const q = new URLSearchParams(location.search);
  const her = q.get("to") || "å°å¯çˆ±";
  const me  = q.get("from") || "â€”â€” æ¥è‡ªä½ çš„æŸæŸ";
  document.getElementById("hi").textContent = her + "ï¼Œæˆ‘æ¥å•¦ï½";
  document.getElementById("sig").textContent = me;
  document.getElementById("year").textContent = new Date().getFullYear();

  /* ===== 2) 18 æ¡å¡ç‰Œï¼Œæœ€åä¸€å¼ å›ºå®šâ€œè·å¾—ä¸€åªå°çŒ«â€ ===== */
  const WISHES = [
    "æ„¿ä½ æ°¸è¿œè¢«æ¸©æŸ”ä»¥å¾…ï¼Œä¹Ÿæ¸©æŸ”å¾…å·±ã€‚","è€ƒè¯•é¡ºåˆ©ï¼Œç¡çœ é¦™ç”œï¼Œå¸¸å¸¸ç¬‘å‡ºé…’çªã€‚",
    "ä¸€è·¯æœ‰äººç›¸ä¼´ï¼Œå›å¤´ä¹Ÿæœ‰æ˜Ÿå…‰ã€‚","åƒå–œæ¬¢çš„ç”œç‚¹ï¼Œä¸å–œæ¬¢çš„çƒ¦æ¼é€šé€šæ‹œæ‹œã€‚",
    "æ°¸è¿œå¯¹ä¸–ç•ŒæŠ±å¥½å¥‡ï¼Œä¹Ÿå¯¹è‡ªå·±æŠ±è€å¿ƒã€‚","æŠŠä¸å®‰äº¤ç»™æˆ‘ï¼ŒæŠŠå¯çˆ±ç•™ç»™ä½ ã€‚",
    "æ¢¦æƒ³æœ‰æ–¹å‘ï¼Œè„šæ­¥æœ‰é£ã€‚","å¶å°”è¿·è·¯ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬ä¸€èµ·æ‰¾å›å»ã€‚",
    "è¢«å–œæ¬¢çš„äººå–œæ¬¢ï¼Œä¹Ÿè¢«è‡ªå·±å–œæ¬¢ã€‚","è¿åŠ¨ä¸ç´¯ï¼Œä½œä¸šä¸å¤šï¼Œè€å¸ˆè¶…niceï¼",
    "å¤©æ°”åˆšåˆšå¥½ï¼Œå£è¢‹è£…ä¸‹ä¸€æ•´ç‰‡æœˆå…‰ã€‚","ç…§ç‰‡éƒ½å¥½çœ‹ï¼Œé•œå­æ›´è¯šå®ã€‚",
    "æ—…é€”ä¸€è·¯å¹³å®‰ï¼Œè¿”ç¨‹ä¹Ÿæ»¡è½½æ¬¢å–œã€‚","èº«ä½“å¥å¥åº·åº·ï¼Œèƒƒå£å¼€å¼€ï¼Œç¡çœ æ»¡åˆ†ã€‚",
    "æ¯ä¸€å¤©éƒ½èƒ½é‡è§ä¸€ç‚¹å°æƒŠå–œã€‚","ä¸è¢«ç„¦è™‘è¿½ç€è·‘ï¼Œè¢«æ¸©æš–æ‹¥ç€èµ°ã€‚",
    "æ„¿ä½ æ‰€å¿µçš†å¦‚æ„¿ï¼Œæ‰€è¡ŒåŒ–å¦é€”ã€‚","è·å¾—ä¸€åªå°çŒ« ğŸ±"
  ];

  /* ===== 3) æ‰“å­—æœºçŸ­å¥ ===== */
  const msg = `ä»Šå¤©æ˜¯ä½ çš„18å²ï¼Œæˆ‘æŠŠä¸€åªä¼šæ’’å¨‡çš„å°çŒ«ã€åå…«ä¸ªå°å¿ƒæ„¿ï¼Œå’Œä¸€ä¸ªå°å°å½©è›‹éƒ½è£…è¿›è¿™ä¸ªé¡µé¢é‡Œã€‚ç‚¹ç‚¹æˆ‘è¯•è¯•ï½`;
  const typeEl = document.getElementById("type");
  let i=0; (function type(){ if(i<=msg.length){ typeEl.textContent = msg.slice(0,i++); setTimeout(type,28);} })();

  /* ===== 4) å€’è®¡æ—¶ï¼šåˆ°ç‚¹æ”¹æ ‡é¢˜å¹¶é£˜çˆ±å¿ƒ ===== */
  const countdownEl = document.getElementById("countdown");
  function renderCount(){
    const now = new Date();
    const target = new Date(BIRTHDAY.replace(/-/g,'/')); // iOS å…¼å®¹
    const diff = target - now;
    if(diff > 0){
      const d = Math.floor(diff/86400000);
      const h = Math.floor((diff%86400000)/3600000);
      const m = Math.floor((diff%3600000)/60000);
      const s = Math.floor((diff%60000)/1000);
      countdownEl.innerHTML = ["å¤©","æ—¶","åˆ†","ç§’"].map((u,idx)=> {
        const v=[d,h,m,s][idx]; return `<div class="box"><b>${v}</b>${u}</div>`;
      }).join("");
    }else{
      document.getElementById("title").textContent = "Happy 18! ğŸ‰";
      countdownEl.innerHTML = `<span class="pill">ä»Šå¤©æ˜¯ä½ çš„ä¸»åœºï¼</span>`;
      popHearts(18);
    }
  }
  renderCount(); setInterval(renderCount,1000);

  /* ===== 5) æ¸²æŸ“ç¿»ç‰Œ ===== */
  const grid = document.getElementById("grid18");
  WISHES.forEach((text,idx)=>{
    const cell = document.createElement("div"); cell.className="flip";
    cell.innerHTML = `
      <div class="card3d">
        <div class="face front">#${idx+1}</div>
        <div class="face back">${text}</div>
      </div>`;
    cell.addEventListener("click", ()=> cell.classList.toggle("flipped"));
    grid.appendChild(cell);
  });

  /* ===== 6) çˆ±å¿ƒç²’å­ ===== */
  const heartsBox = document.getElementById("hearts");
  function popHearts(n=14){
    for(let i=0;i<n;i++){
      const el = document.createElement("div");
      el.className="heart";
      el.textContent=["â¤ï¸","ğŸ©·","ğŸ’—","ğŸ’–"][Math.floor(Math.random()*4)];
      el.style.left=(Math.random()*100)+"vw";
      el.style.bottom="-10vh";
      el.style.animationDelay=(Math.random()*0.6)+"s";
      heartsBox.appendChild(el);
      setTimeout(()=>heartsBox.removeChild(el),2600);
    }
    if(navigator.vibrate) navigator.vibrate(30); // æ‰‹æœºè½»éœ‡
  }

  /* ===== 7) ç…§ç‰‡çŒ«äº’åŠ¨ï¼šå®šæ—¶è¡¨æ¼” + ç‚¹å‡»å–µå«æŠ–åŠ¨ ===== */
  const kitty = document.getElementById("kittyPhoto");

  // WebAudio åˆæˆâ€œå–µâ€éŸ³ï¼ˆå¾®ä¿¡éœ€è¦ç”¨æˆ·æ‰‹åŠ¿åæ‰èƒ½å¯éŸ³ï¼‰
  let audioCtx = null;
  function meow(){
    try{
      if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const ctx = audioCtx;
      const o1 = ctx.createOscillator(), o2 = ctx.createOscillator();
      const g  = ctx.createGain();
      o1.type="triangle"; o2.type="sawtooth";
      o1.frequency.setValueAtTime(440, ctx.currentTime);
      o1.frequency.exponentialRampToValueAtTime(300, ctx.currentTime+0.18);
      o2.frequency.setValueAtTime(660, ctx.currentTime);
      o2.frequency.exponentialRampToValueAtTime(420, ctx.currentTime+0.18);
      g.gain.value = 0.0001;
      g.gain.exponentialRampToValueAtTime(0.22, ctx.currentTime+0.05);
      g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+0.30);
      o1.connect(g); o2.connect(g); g.connect(ctx.destination);
      o1.start(); o2.start(); o1.stop(ctx.currentTime+0.34); o2.stop(ctx.currentTime+0.34);
    }catch(_){}
  }

  function doOnce(cls){ kitty.classList.add(cls); setTimeout(()=>kitty.classList.remove(cls), 1000); }
  function randomAct(){
    const acts = ["spin","jump","runL","runR"];
    doOnce(acts[Math.floor(Math.random()*acts.length)]);
  }
  setInterval(randomAct, 4500); // æ¯ 4.5 ç§’è¡¨æ¼”ä¸€æ¬¡

  // ç‚¹å‡»ï¼šå–µå« + æŠ–åŠ¨ + çˆ±å¿ƒ
  kitty.addEventListener("click", ()=>{ meow(); doOnce("shake"); popHearts(12); });
</script>
</html>
